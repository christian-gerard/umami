{"ast":null,"code":"import{createContext,useState,useEffect}from'react';import toast from'react-hot-toast';import{jsx as _jsx}from\"react/jsx-runtime\";export const UserContext=/*#__PURE__*/createContext();const UserProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const login=user=>setUser(user);const logout=()=>{try{fetch('/logout',{method:'DELETE'}).then(res=>{if(res.status===204){setUser(null);toast.success('Logged Out');}else{toast.error('Something whent wrong while logging out. Please try again.');}});}catch(err){throw err;}};const removeUserData=()=>{try{fetch('/logout',{method:'DELETE'}).then(res=>{if(res.status===204){setUser(null);}else{}});}catch(err){throw err;}};const updateRecipes=newRecipes=>{setUser({...user,recipes:newRecipes});};const updateUser=newUser=>{setUser({...user,email:newUser.email,username:newUser.username});};useEffect(()=>{fetch('/me').then(resp=>{if(resp.ok){resp.json().then(setUser);}else{toast.error('Please log in');}});},[]);return/*#__PURE__*/_jsx(UserContext.Provider,{value:{user,login,logout,updateRecipes,removeUserData,updateUser},children:children});};export default UserProvider;","map":{"version":3,"names":["createContext","useState","useEffect","toast","jsx","_jsx","UserContext","UserProvider","_ref","children","user","setUser","login","logout","fetch","method","then","res","status","success","error","err","removeUserData","updateRecipes","newRecipes","recipes","updateUser","newUser","email","username","resp","ok","json","Provider","value"],"sources":["/Users/christiangerard/Development/code/capstone/umami/client/src/context/UserContext.js"],"sourcesContent":["import { createContext, useState, useEffect } from 'react'\nimport toast from 'react-hot-toast'\n\nexport const UserContext = createContext()\n\nconst UserProvider = ({children}) => {\n\n    const [user, setUser] = useState(null)\n    const login = (user) => setUser(user)\n    const logout = () => {\n          try {\n              fetch('/logout', { method: 'DELETE' }).then((res) => {\n                  if (res.status === 204) {\n                      setUser(null)\n                      toast.success('Logged Out')\n                  } else {\n                      toast.error('Something whent wrong while logging out. Please try again.')\n                  }\n              })\n          } catch (err) {\n              throw err\n    }}\n    const removeUserData = () => {\n        try {\n            fetch('/logout', { method: 'DELETE' }).then((res) => {\n                if (res.status === 204) {\n                    setUser(null)\n                    \n                } else {\n\n                }\n            })\n        } catch (err) {\n            throw err\n  }}\n  \n    const updateRecipes = (newRecipes) => {\n\n      setUser({ ...user, recipes: newRecipes })\n      \n    }\n\n    const updateUser = (newUser) => {\n        setUser({ ...user, email: newUser.email, username: newUser.username })\n    }\n  \n    useEffect(() => {\n      fetch('/me')\n      .then(resp => {\n          if (resp.ok) {\n          resp.json().then(setUser)\n\n          } else {\n          toast.error('Please log in')\n          }\n      })\n  }, [])\n\n  return (\n\n    <UserContext.Provider value={{user, login, logout, updateRecipes, removeUserData, updateUser}}>\n        {children}\n    </UserContext.Provider>\n\n  )\n\n\n}\n\n\nexport default UserProvider"],"mappings":"AAAA,OAASA,aAAa,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC1D,MAAO,CAAAC,KAAK,KAAM,iBAAiB,QAAAC,GAAA,IAAAC,IAAA,yBAEnC,MAAO,MAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAE1C,KAAM,CAAAO,YAAY,CAAGC,IAAA,EAAgB,IAAf,CAACC,QAAQ,CAAC,CAAAD,IAAA,CAE5B,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAAAW,KAAK,CAAIF,IAAI,EAAKC,OAAO,CAACD,IAAI,CAAC,CACrC,KAAM,CAAAG,MAAM,CAAGA,CAAA,GAAM,CACf,GAAI,CACAC,KAAK,CAAC,SAAS,CAAE,CAAEC,MAAM,CAAE,QAAS,CAAC,CAAC,CAACC,IAAI,CAAEC,GAAG,EAAK,CACjD,GAAIA,GAAG,CAACC,MAAM,GAAK,GAAG,CAAE,CACpBP,OAAO,CAAC,IAAI,CAAC,CACbR,KAAK,CAACgB,OAAO,CAAC,YAAY,CAAC,CAC/B,CAAC,IAAM,CACHhB,KAAK,CAACiB,KAAK,CAAC,4DAA4D,CAAC,CAC7E,CACJ,CAAC,CAAC,CACN,CAAE,MAAOC,GAAG,CAAE,CACV,KAAM,CAAAA,GAAG,CACnB,CAAC,CAAC,CACF,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CACzB,GAAI,CACAR,KAAK,CAAC,SAAS,CAAE,CAAEC,MAAM,CAAE,QAAS,CAAC,CAAC,CAACC,IAAI,CAAEC,GAAG,EAAK,CACjD,GAAIA,GAAG,CAACC,MAAM,GAAK,GAAG,CAAE,CACpBP,OAAO,CAAC,IAAI,CAAC,CAEjB,CAAC,IAAM,CAEP,CACJ,CAAC,CAAC,CACN,CAAE,MAAOU,GAAG,CAAE,CACV,KAAM,CAAAA,GAAG,CACnB,CAAC,CAAC,CAEA,KAAM,CAAAE,aAAa,CAAIC,UAAU,EAAK,CAEpCb,OAAO,CAAC,CAAE,GAAGD,IAAI,CAAEe,OAAO,CAAED,UAAW,CAAC,CAAC,CAE3C,CAAC,CAED,KAAM,CAAAE,UAAU,CAAIC,OAAO,EAAK,CAC5BhB,OAAO,CAAC,CAAE,GAAGD,IAAI,CAAEkB,KAAK,CAAED,OAAO,CAACC,KAAK,CAAEC,QAAQ,CAAEF,OAAO,CAACE,QAAS,CAAC,CAAC,CAC1E,CAAC,CAED3B,SAAS,CAAC,IAAM,CACdY,KAAK,CAAC,KAAK,CAAC,CACXE,IAAI,CAACc,IAAI,EAAI,CACV,GAAIA,IAAI,CAACC,EAAE,CAAE,CACbD,IAAI,CAACE,IAAI,CAAC,CAAC,CAAChB,IAAI,CAACL,OAAO,CAAC,CAEzB,CAAC,IAAM,CACPR,KAAK,CAACiB,KAAK,CAAC,eAAe,CAAC,CAC5B,CACJ,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAEN,mBAEEf,IAAA,CAACC,WAAW,CAAC2B,QAAQ,EAACC,KAAK,CAAE,CAACxB,IAAI,CAAEE,KAAK,CAAEC,MAAM,CAAEU,aAAa,CAAED,cAAc,CAAEI,UAAU,CAAE,CAAAjB,QAAA,CACzFA,QAAQ,CACS,CAAC,CAK3B,CAAC,CAGD,cAAe,CAAAF,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}